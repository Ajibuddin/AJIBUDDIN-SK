<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶∏‡¶π‡¶ú ‡¶∏‡ßÇ‡¶∞‡¶æ - ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶â‡¶ö‡ßç‡¶ö‡¶æ‡¶∞‡¶£ ‡¶ì ‡¶Ö‡¶∞‡ßç‡¶•</title>
    <style>
        :root {
            --primary: #2c786c;
            --secondary: #004445;
            --light: #f8f1f1;
            --dark: #021c1e;
            --accent: #ff7e33;
            --border-dark: #021c1e;
            --border-light: #dddddd;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            transition: background-color 0.3s, color 0.3s;
        }
        
        .dark-mode {
            background-color: var(--dark);
            color: var(--light);
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            text-align: center;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .theme-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--accent);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 100;
        }
        
        .search-bar {
            width: 100%;
            padding: 0.8rem 1rem;
            margin: 1rem 0;
            border: 3px solid var(--border-dark);
            border-radius: 30px;
            font-size: 1rem;
            outline: none;
            background-color: white;
            color: var(--dark);
        }

        .dark-mode .search-bar {
            border-color: var(--border-light);
            background-color: #032b2d;
            color: var(--light);
        }

        /* 2x2 Grid for Feature Buttons */
        .feature-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .feature-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .feature-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
        
        .surah-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }
        
        .surah-card {
            background: white; border-radius: 10px; overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease;
        }
        
        .dark-mode .surah-card { background: #032b2d; }
        .surah-card:hover { transform: translateY(-5px); }
        
        .surah-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white;
            padding: 1rem; display: flex; justify-content: space-between; align-items: center;
        }
        
        .surah-content { padding: 1.5rem; }
        .arabic-preview {
            font-size: 1.2rem; text-align: right; line-height: 2rem;
            font-family: 'Traditional Arabic', 'Amiri', serif; margin-bottom: 1rem; direction: rtl;
        }
        .details-btn {
             background-color: var(--accent); color: white; border: none; padding: 0.6rem 1.2rem;
             border-radius: 20px; cursor: pointer; font-weight: bold; width: 100%; transition: background-color 0.3s;
        }
        .details-btn:hover { background-color: #e66a20; }
        
        /* Modal Styles */
        .modal {
            display: none; position: fixed; z-index: 2000; left: 0; top: 0;
            width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6);
            align-items: center; justify-content: center;
        }
        .modal-content {
            background-color: var(--light); color: var(--dark);
            margin: auto; padding: 25px; border: 1px solid #888;
            width: 90%; max-width: 500px; border-radius: 15px; text-align: center;
            position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .dark-mode .modal-content { background-color: #032b2d; color: var(--light); }
        .modal-close {
            color: #aaa; position: absolute; top: 10px; right: 20px;
            font-size: 28px; font-weight: bold; cursor: pointer;
        }

        /* Surah Details Modal */
        .surah-details .modal-content { max-width: 800px; text-align: left; }
        .details-box {
            border: 2px solid var(--border-dark); border-radius: 10px; padding: 1.5rem; margin-bottom: 1.5rem;
        }
        .dark-mode .details-box { border-color: var(--border-light); }
        .details-box .arabic { font-size: 1.8rem; text-align: right; line-height: 3rem; font-family: 'Traditional Arabic', 'Amiri', serif; }
        .details-box .bangla { font-size: 1.1rem; line-height: 1.8; }
        .details-box .translation { font-size: 1rem; font-style: italic; line-height: 1.7; }
        .audio-player { width: 100%; margin-top: 1rem; }

        /* Donation Modal Content */
        #qrCodeImg { width: 200px; height: 200px; margin: 1rem auto; display: block; border-radius: 8px; }
        #upiId { font-weight: bold; font-size: 1.1rem; margin-top: 1rem; user-select: all; word-break: break-all; }

        /* Prayer Times Modal */
        #prayerTimesList { list-style: none; padding: 0; margin-top: 1rem; }
        #prayerTimesList li { display: flex; justify-content: space-between; padding: 0.8rem; border-bottom: 1px solid #ddd; }
        .dark-mode #prayerTimesList li { border-bottom-color: #444; }
        #prayerTimesList li:last-child { border-bottom: none; }
        #prayerTimesList span { font-weight: bold; color: var(--primary); }
        .dark-mode #prayerTimesList span { color: var(--accent); }

        /* Qibla Compass Modal */
        #compass { width: 200px; height: 200px; margin: 1.5rem auto; border: 5px solid var(--primary); border-radius: 50%; position: relative; }
        #qiblaNeedle {
            width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent;
            border-bottom: 100px solid var(--accent); position: absolute; top: 0; left: 50%;
            transform-origin: bottom center; transform: translateX(-50%); transition: transform 0.5s;
        }
        #compass-info { font-size: 0.9rem; color: #666; }
        .dark-mode #compass-info { color: #aaa; }

        /* Tasbih Counter Modal */
        #tasbihDisplay { font-size: 5rem; font-weight: bold; margin: 1rem 0; color: var(--primary); }
        #tasbihCountBtn {
            width: 150px; height: 150px; border-radius: 50%; border: none; background-color: var(--primary);
            color: white; font-size: 2rem; cursor: pointer; margin-bottom: 1rem;
        }
        #tasbihResetBtn { background-color: var(--accent); color: white; border: none; padding: 0.7rem 1.5rem; border-radius: 20px; cursor: pointer; }
        
        footer { text-align: center; padding: 1.5rem; margin-top: 2rem; color: #777; }
        .dark-mode footer { color: #aaa; }

        @media (max-width: 600px) {
            .feature-buttons { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header>
        <h1>‡¶∏‡¶π‡¶ú ‡¶∏‡ßÇ‡¶∞‡¶æ</h1>
        <p>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶â‡¶ö‡ßç‡¶ö‡¶æ‡¶∞‡¶£ ‡¶ì ‡¶Ö‡¶∞‡ßç‡¶• ‡¶∏‡¶π</p>
    </header>
    
    <div class="container">
        <input type="text" class="search-bar" placeholder="‡¶∏‡ßÇ‡¶∞‡¶æ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶® (‡¶®‡¶æ‡¶Æ, ‡¶â‡¶ö‡ßç‡¶ö‡¶æ‡¶∞‡¶£ ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶)...">
        
        <div class="feature-buttons">
            <button class="feature-btn" id="prayerTimeBtn">‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü</button>
            <button class="feature-btn" id="qiblaBtn">‡¶ï‡¶ø‡¶¨‡¶≤‡¶æ ‡¶ï‡¶Æ‡ßç‡¶™‡¶æ‡¶∏</button>
            <button class="feature-btn" id="tasbihBtn">‡¶§‡¶æ‡¶∏‡¶¨‡¶ø‡¶π ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞</button>
            <button class="feature-btn" id="donateBtn">‡¶°‡ßã‡¶®‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>

        <div class="surah-list"></div>
    </div>
    
    <!-- All Modals Below -->
    <div id="surahDetailsModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div id="detailsContent"></div>
        </div>
    </div>

    <div id="donationModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            <p>‡¶è‡¶á ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø‡¶∞ ‡¶â‡¶®‡ßç‡¶®‡¶§‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡•§</p>
            <img id="qrCodeImg" src="" alt="UPI QR Code Loading...">
            <p>UPI ID:</p>
            <p id="upiId">ajibuddin58@axl</p>
        </div>
    </div>

    <div id="prayerModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü</h2>
            <div id="prayerTimesContent"><p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶™‡ßá‡¶§‡ßá ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶¶‡¶ø‡¶®...</p></div>
        </div>
    </div>

    <div id="qiblaModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>‡¶ï‡¶ø‡¶¨‡¶≤‡¶æ ‡¶ï‡¶Æ‡ßç‡¶™‡¶æ‡¶∏</h2>
            <div id="compass">
                <div id="qiblaNeedle"></div>
            </div>
            <p id="compass-info">‡¶∏‡¶†‡¶ø‡¶ï ‡¶¶‡¶ø‡¶ï ‡¶™‡ßá‡¶§‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶∏‡¶Æ‡¶æ‡¶®‡ßç‡¶§‡¶∞‡¶æ‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ß‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®‡•§</p>
        </div>
    </div>

    <div id="tasbihModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>‡¶§‡¶æ‡¶∏‡¶¨‡¶ø‡¶π ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞</h2>
            <div id="tasbihDisplay">0</div>
            <button id="tasbihCountBtn">‡¶ó‡¶£‡¶®‡¶æ</button>
            <button id="tasbihResetBtn">‡¶∞‡¶ø‡¶∏‡ßá‡¶ü</button>
        </div>
    </div>
    
    <button class="theme-toggle" id="themeToggle">üåì</button>

    <footer>
        <p>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®‡¶É ‡¶Ü‡¶ú‡¶ø‡¶¨‡ßÅ‡¶¶‡ßç‡¶¶‡¶ø‡¶®</p>
    </footer>
    
    <script>
        // Surah Data (shortened for brevity)
        const surahs = [
             { id: 1, name: "‡¶∏‡ßÇ‡¶∞‡¶æ ‡¶Ü‡¶≤-‡¶´‡¶æ‡¶§‡¶ø‡¶π‡¶æ", arabic: "ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸéŸáŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê Ô¥øŸ°Ô¥æ Ÿ±ŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸëŸéŸáŸê ÿ±Ÿéÿ®ŸëŸê Ÿ±ŸÑŸíÿπŸéŸ∞ŸÑŸéŸÖŸêŸäŸÜŸé Ô¥øŸ¢Ô¥æ Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê Ô¥øŸ£Ô¥æ ŸÖŸéŸ∞ŸÑŸêŸÉŸê ŸäŸéŸàŸíŸÖŸê Ÿ±ŸÑÿØŸëŸêŸäŸÜŸê Ô¥øŸ§Ô¥æ ÿ•ŸêŸäŸëŸéÿßŸÉŸé ŸÜŸéÿπŸíÿ®ŸèÿØŸè ŸàŸéÿ•ŸêŸäŸëŸéÿßŸÉŸé ŸÜŸéÿ≥Ÿíÿ™ŸéÿπŸêŸäŸÜŸè Ô¥øŸ•Ô¥æ Ÿ±ŸáŸíÿØŸêŸÜŸéÿß Ÿ±ŸÑÿµŸëŸêÿ±ŸéŸ∞ÿ∑Ÿé Ÿ±ŸÑŸíŸÖŸèÿ≥Ÿíÿ™ŸéŸÇŸêŸäŸÖŸé Ô¥øŸ¶Ô¥æ ÿµŸêÿ±ŸéŸ∞ÿ∑Ÿé Ÿ±ŸÑŸëŸéÿ∞ŸêŸäŸÜŸé ÿ£ŸéŸÜŸíÿπŸéŸÖŸíÿ™Ÿé ÿπŸéŸÑŸéŸäŸíŸáŸêŸÖŸí ÿ∫ŸéŸäŸíÿ±Ÿê Ÿ±ŸÑŸíŸÖŸéÿ∫Ÿíÿ∂ŸèŸàÿ®Ÿê ÿπŸéŸÑŸéŸäŸíŸáŸêŸÖŸí ŸàŸéŸÑŸéÿß Ÿ±ŸÑÿ∂ŸëŸéÿßŸìŸÑŸëŸêŸäŸÜŸé Ô¥øŸßÔ¥æ", bangla: "‡¶¨‡¶ø‡¶∏‡¶Æ‡¶ø‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡¶Æ‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡ßÄ‡¶Æ‡•§ (‡ßß) ‡¶Ü‡¶≤‡¶π‡¶æ‡¶Æ‡¶¶‡ßÅ ‡¶≤‡¶ø‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶ø ‡¶∞‡¶æ‡¶¨‡ßç‡¶¨‡¶ø‡¶≤ ‡¶Ü‡¶≤‡¶æ‡¶Æ‡ßÄ‡¶®‡•§ (‡ß®) ‡¶Ü‡¶∞ ‡¶∞‡¶æ‡¶π‡¶Æ‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡ßÄ‡¶Æ‡•§ (‡ß©) ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï‡¶ø ‡¶á‡¶Ø‡¶º‡¶æ‡¶ì‡¶Æ‡¶ø‡¶¶‡ßç‡¶¶‡ßÄ‡¶®‡•§ (‡ß™) ‡¶á‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ ‡¶®‡¶æ‡¶¨‡ßÅ‡¶¶‡ßÅ ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶á‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ ‡¶®‡¶æ‡¶∏‡¶§‡¶æ‡¶à‡¶®‡•§ (‡ß´) ‡¶á‡¶π‡¶¶‡¶ø‡¶®‡¶æ‡¶∏ ‡¶∏‡¶ø‡¶∞‡¶æ‡¶§‡¶æ‡¶≤ ‡¶Æ‡ßÅ‡¶∏‡ßç‡¶§‡¶æ‡¶ï‡ßÄ‡¶Æ‡•§ (‡ß¨) ‡¶∏‡¶ø‡¶∞‡¶æ‡¶§‡¶æ‡¶≤‡ßç‡¶≤‡¶æ‡¶ú‡¶ø‡¶®‡¶æ ‡¶Ü‡¶®‡¶Ü‡¶Æ‡¶§‡¶æ ‡¶Ü‡¶≤‡¶æ‡¶á‡¶π‡¶ø‡¶Æ, ‡¶ó‡¶æ‡¶á‡¶∞‡¶ø‡¶≤ ‡¶Æ‡¶æ‡¶ó‡¶¶‡ßÅ‡¶¨‡¶ø ‡¶Ü‡¶≤‡¶æ‡¶á‡¶π‡¶ø‡¶Æ ‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡¶æ‡¶¶ ‡¶¶‡¶æ‡¶≤‡ßç‡¶≤‡ßÄ‡¶®‡•§ (‡ß≠)", translation: "‡¶™‡¶∞‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶£‡¶æ‡¶Æ‡¶Ø‡¶º ‡¶Ö‡¶∏‡ßÄ‡¶Æ ‡¶¶‡¶Ø‡¶º‡¶æ‡¶≤‡ßÅ ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßá‡•§ (‡ßß) ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶™‡ßç‡¶∞‡¶∂‡¶Ç‡¶∏‡¶æ ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø, ‡¶Ø‡¶ø‡¶®‡¶ø ‡¶∏‡¶ï‡¶≤ ‡¶∏‡ßÉ‡¶∑‡ßç‡¶ü‡¶ø‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶™‡¶æ‡¶≤‡¶ï‡•§ (‡ß®) ‡¶Ø‡¶ø‡¶®‡¶ø ‡¶™‡¶∞‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶£‡¶æ‡¶Æ‡¶Ø‡¶º, ‡¶Ö‡¶§‡¶ø ‡¶¶‡¶Ø‡¶º‡¶æ‡¶≤‡ßÅ‡•§ (‡ß©) ‡¶¨‡¶ø‡¶ö‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï‡•§ (‡ß™) ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞‡¶á ‡¶á‡¶¨‡¶æ‡¶¶‡¶§ ‡¶ï‡¶∞‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá‡¶á ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ö‡¶æ‡¶á‡•§ (‡ß´) ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞‡¶ï‡ßá ‡¶∏‡¶∞‡¶≤ ‡¶™‡¶• ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ì‡•§ (‡ß¨) ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡¶• ‡¶Ø‡¶æ‡¶¶‡ßá‡¶∞‡¶ï‡ßá ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶®‡ßá‡¶Ø‡¶º‡¶æ‡¶Æ‡¶§ ‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßá‡¶õ, ‡¶Ø‡¶æ‡¶∞‡¶æ ‡¶Ö‡¶≠‡¶ø‡¶∂‡¶™‡ßç‡¶§ ‡¶®‡¶Ø‡¶º ‡¶è‡¶¨‡¶Ç ‡¶™‡¶•‡¶≠‡ßç‡¶∞‡¶∑‡ßç‡¶ü‡¶ì ‡¶®‡¶Ø‡¶º‡•§ (‡ß≠)", audio: "https://server.mp3quran.net/sds/001.mp3" },
             { id: 112, name: "‡¶∏‡ßÇ‡¶∞‡¶æ ‡¶Ü‡¶≤-‡¶á‡¶ñ‡¶≤‡¶æ‡¶∏", arabic: "ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸéŸáŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê ŸÇŸèŸÑŸí ŸáŸèŸàŸé Ÿ±ŸÑŸÑŸëŸéŸáŸè ÿ£Ÿéÿ≠ŸéÿØŸå Ô¥øŸ°Ô¥æ Ÿ±ŸÑŸÑŸëŸéŸáŸè Ÿ±ŸÑÿµŸëŸéŸÖŸéÿØŸè Ô¥øŸ¢Ô¥æ ŸÑŸéŸÖŸí ŸäŸéŸÑŸêÿØŸí ŸàŸéŸÑŸéŸÖŸí ŸäŸèŸàŸÑŸéÿØŸí Ô¥øŸ£Ô¥æ ŸàŸéŸÑŸéŸÖŸí ŸäŸéŸÉŸèŸÜ ŸÑŸëŸéŸáŸè€• ŸÉŸèŸÅŸèŸàŸãÿß ÿ£Ÿéÿ≠ŸéÿØŸå€¢ Ô¥øŸ§Ô¥æ", bangla: "‡¶¨‡¶ø‡¶∏‡¶Æ‡¶ø‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡¶Æ‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡ßÄ‡¶Æ‡•§ ‡¶ï‡ßÅ‡¶≤ ‡¶π‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡ßÅ ‡¶Ü‡¶π‡¶æ‡¶¶‡•§ (‡ßß) ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡ßÅ‡¶∏ ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶¶‡•§ (‡ß®) ‡¶≤‡¶æ‡¶Æ ‡¶á‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø‡¶¶ ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶≤‡¶æ‡¶Æ ‡¶á‡¶â‡¶≤‡¶æ‡¶¶‡•§ (‡ß©) ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶≤‡¶æ‡¶Æ ‡¶á‡¶Ø‡¶º‡¶æ‡¶ï‡ßÅ‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡ßÅ ‡¶ï‡ßÅ‡¶´‡ßÅ‡¶Ø‡¶º‡¶æ‡¶® ‡¶Ü‡¶π‡¶æ‡¶¶‡•§ (‡ß™)", translation: "‡¶™‡¶∞‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶£‡¶æ‡¶Æ‡¶Ø‡¶º ‡¶Ö‡¶∏‡ßÄ‡¶Æ ‡¶¶‡¶Ø‡¶º‡¶æ‡¶≤‡ßÅ ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßá‡•§ ‡¶¨‡¶≤‡ßÅ‡¶®, ‡¶§‡¶ø‡¶®‡¶ø ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π, ‡¶è‡¶ï‡¶ï‡•§ (‡ßß) ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π ‡¶Ö‡¶Æ‡ßÅ‡¶ñ‡¶æ‡¶™‡ßá‡¶ï‡ßç‡¶∑‡ßÄ‡•§ (‡ß®) ‡¶§‡¶ø‡¶®‡¶ø ‡¶ï‡¶æ‡¶â‡¶ï‡ßá ‡¶ú‡¶®‡ßç‡¶Æ ‡¶¶‡ßá‡¶®‡¶®‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶Å‡¶ï‡ßá‡¶ì ‡¶ú‡¶®‡ßç‡¶Æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ (‡ß©) ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶Å‡¶∞ ‡¶∏‡¶Æ‡¶§‡ßÅ‡¶≤‡ßç‡¶Ø ‡¶ï‡ßá‡¶â ‡¶®‡ßá‡¶á‡•§ (‡ß™)", audio: "https://server.mp3quran.net/sds/112.mp3" },
             { id: 113, name: "‡¶∏‡ßÇ‡¶∞‡¶æ ‡¶Ü‡¶≤-‡¶´‡¶æ‡¶≤‡¶æ‡¶ï", arabic: "ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸéŸáŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê ŸÇŸèŸÑŸí ÿ£ŸéÿπŸèŸàÿ∞Ÿè ÿ®Ÿêÿ±Ÿéÿ®ŸëŸê Ÿ±ŸÑŸíŸÅŸéŸÑŸéŸÇŸê Ô¥øŸ°Ô¥æ ŸÖŸêŸÜ ÿ¥Ÿéÿ±ŸëŸê ŸÖŸéÿß ÿÆŸéŸÑŸéŸÇŸé Ô¥øŸ¢Ô¥æ ŸàŸéŸÖŸêŸÜ ÿ¥Ÿéÿ±ŸëŸê ÿ∫Ÿéÿßÿ≥ŸêŸÇŸç ÿ•Ÿêÿ∞Ÿéÿß ŸàŸéŸÇŸéÿ®Ÿé Ô¥øŸ£Ô¥æ ŸàŸéŸÖŸêŸÜ ÿ¥Ÿéÿ±ŸëŸê Ÿ±ŸÑŸÜŸëŸéŸÅŸëŸéŸ∞ÿ´ŸéŸ∞ÿ™Ÿê ŸÅŸêŸâ Ÿ±ŸÑŸíÿπŸèŸÇŸéÿØŸê Ô¥øŸ§Ô¥æ ŸàŸéŸÖŸêŸÜ ÿ¥Ÿéÿ±ŸëŸê ÿ≠Ÿéÿßÿ≥ŸêÿØŸç ÿ•Ÿêÿ∞Ÿéÿß ÿ≠Ÿéÿ≥ŸéÿØŸé Ô¥øŸ•Ô¥æ", bangla: "‡¶¨‡¶ø‡¶∏‡¶Æ‡¶ø‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡¶Æ‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡ßÄ‡¶Æ‡•§ ‡¶ï‡ßÅ‡¶≤ ‡¶Ü‡¶â‡¶Ø‡ßÅ ‡¶¨‡¶ø‡¶∞‡¶æ‡¶¨‡ßç‡¶¨‡¶ø‡¶≤ ‡¶´‡¶æ‡¶≤‡¶æ‡¶ï‡•§ (‡ßß) ‡¶Æ‡¶ø‡¶® ‡¶∂‡¶æ‡¶∞‡¶∞‡¶ø ‡¶Æ‡¶æ ‡¶ñ‡¶æ‡¶≤‡¶æ‡¶ï‡•§ (‡ß®) ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Æ‡¶ø‡¶® ‡¶∂‡¶æ‡¶∞‡¶∞‡¶ø ‡¶ó‡¶æ‡¶∏‡¶ø‡¶ï‡¶ø‡¶® ‡¶á‡¶Ø‡¶æ ‡¶ì‡¶Ø‡¶º‡¶æ‡¶ï‡¶æ‡¶¨‡•§ (‡ß©) ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Æ‡¶ø‡¶® ‡¶∂‡¶æ‡¶∞‡¶∞‡¶ø‡¶® ‡¶®‡¶æ‡¶´‡¶´‡¶æ‡¶∏‡¶æ‡¶§‡¶ø ‡¶´‡¶ø‡¶≤ ‡¶â‡¶ï‡¶æ‡¶¶‡•§ (‡ß™) ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Æ‡¶ø‡¶® ‡¶∂‡¶æ‡¶∞‡¶∞‡¶ø ‡¶π‡¶æ‡¶∏‡¶ø‡¶¶‡¶ø‡¶® ‡¶á‡¶Ø‡¶æ ‡¶π‡¶æ‡¶∏‡¶æ‡¶¶‡•§ (‡ß´)", translation: "‡¶™‡¶∞‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶£‡¶æ‡¶Æ‡¶Ø‡¶º ‡¶Ö‡¶∏‡ßÄ‡¶Æ ‡¶¶‡¶Ø‡¶º‡¶æ‡¶≤‡ßÅ ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßá‡•§ ‡¶¨‡¶≤‡ßÅ‡¶®, ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶∂‡ßç‡¶∞‡¶Ø‡¶º ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡¶õ‡¶ø ‡¶≠‡ßã‡¶∞‡ßá‡¶∞ ‡¶∞‡¶¨‡ßá‡¶∞, (‡ßß) ‡¶§‡¶æ‡¶Å‡¶∞ ‡¶∏‡ßÉ‡¶∑‡ßç‡¶ü‡¶ø‡¶∞ ‡¶Ö‡¶®‡¶ø‡¶∑‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá, (‡ß®) ‡¶Ö‡¶®‡ßç‡¶ß‡¶ï‡¶æ‡¶∞ ‡¶∞‡¶æ‡¶§‡ßá‡¶∞ ‡¶Ö‡¶®‡¶ø‡¶∑‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶Ø‡¶ñ‡¶® ‡¶§‡¶æ ‡¶∏‡¶Æ‡¶æ‡¶ó‡¶§ ‡¶π‡¶Ø‡¶º, (‡ß©) ‡¶ó‡¶ø‡¶Å‡¶ü‡ßá ‡¶´‡ßÅ‡¶Å‡ßé‡¶ï‡¶æ‡¶∞ ‡¶¶‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ö‡¶®‡¶ø‡¶∑‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá, (‡ß™) ‡¶è‡¶¨‡¶Ç ‡¶π‡¶ø‡¶Ç‡¶∏‡ßÅ‡¶ï‡ßá‡¶∞ ‡¶Ö‡¶®‡¶ø‡¶∑‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶Ø‡¶ñ‡¶® ‡¶∏‡ßá ‡¶π‡¶ø‡¶Ç‡¶∏‡¶æ ‡¶ï‡¶∞‡ßá‡•§ (‡ß´)", audio: "https://server.mp3quran.net/sds/113.mp3" },
             { id: 114, name: "‡¶∏‡ßÇ‡¶∞‡¶æ ‡¶Ü‡¶®-‡¶®‡¶æ‡¶∏", arabic: "ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸéŸáŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê ŸÇŸèŸÑŸí ÿ£ŸéÿπŸèŸàÿ∞Ÿè ÿ®Ÿêÿ±Ÿéÿ®ŸëŸê Ÿ±ŸÑŸÜŸëŸéÿßÿ≥Ÿê Ô¥øŸ°Ô¥æ ŸÖŸéŸÑŸêŸÉŸê Ÿ±ŸÑŸÜŸëŸéÿßÿ≥Ÿê Ô¥øŸ¢Ô¥æ ÿ•ŸêŸÑŸéŸ∞ŸáŸê Ÿ±ŸÑŸÜŸëŸéÿßÿ≥Ÿê Ô¥øŸ£Ô¥æ ŸÖŸêŸÜ ÿ¥Ÿéÿ±ŸëŸê Ÿ±ŸÑŸíŸàŸéÿ≥ŸíŸàŸéÿßÿ≥Ÿê Ÿ±ŸÑŸíÿÆŸéŸÜŸëŸéÿßÿ≥Ÿê Ô¥øŸ§Ô¥æ Ÿ±ŸÑŸëŸéÿ∞ŸêŸâ ŸäŸèŸàŸéÿ≥ŸíŸàŸêÿ≥Ÿè ŸÅŸêŸâ ÿµŸèÿØŸèŸàÿ±Ÿê Ÿ±ŸÑŸÜŸëŸéÿßÿ≥Ÿê Ô¥øŸ•Ô¥æ ŸÖŸêŸÜŸé Ÿ±ŸÑŸíÿ¨ŸêŸÜŸëŸéÿ©Ÿê ŸàŸéŸ±ŸÑŸÜŸëŸéÿßÿ≥Ÿê Ô¥øŸ¶Ô¥æ", bangla: "‡¶¨‡¶ø‡¶∏‡¶Æ‡¶ø‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡¶Æ‡¶æ‡¶®‡¶ø‡¶∞ ‡¶∞‡¶æ‡¶π‡ßÄ‡¶Æ‡•§ ‡¶ï‡ßÅ‡¶≤ ‡¶Ü‡¶â‡¶Ø‡ßÅ ‡¶¨‡¶ø‡¶∞‡¶æ‡¶¨‡ßç‡¶¨‡¶ø‡¶® ‡¶®‡¶æ‡¶∏‡•§ (‡ßß) ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï‡¶ø‡¶® ‡¶®‡¶æ‡¶∏‡•§ (‡ß®) ‡¶á‡¶≤‡¶æ‡¶π‡¶ø‡¶® ‡¶®‡¶æ‡¶∏‡•§ (‡ß©) ‡¶Æ‡¶ø‡¶® ‡¶∂‡¶æ‡¶∞‡¶∞‡¶ø‡¶≤ ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∏‡¶ø‡¶≤ ‡¶ñ‡¶æ‡¶®‡ßç‡¶®‡¶æ‡¶∏‡•§ (‡ß™) ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶Ø‡ßÄ ‡¶á‡¶â‡¶ì‡¶Ø‡¶º‡¶æ‡¶∏ ‡¶ì‡¶Ø‡¶º‡¶ø‡¶∏‡ßÅ ‡¶´‡ßÄ ‡¶∏‡ßÅ‡¶¶‡ßÅ‡¶∞‡¶ø‡¶® ‡¶®‡¶æ‡¶∏‡•§ (‡ß´) ‡¶Æ‡¶ø‡¶®‡¶æ‡¶≤ ‡¶ú‡¶ø‡¶®‡ßç‡¶®‡¶æ‡¶§‡¶ø ‡¶ì‡¶Ø‡¶º‡¶æ‡¶® ‡¶®‡¶æ‡¶∏‡•§ (‡ß¨)", translation: "‡¶™‡¶∞‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶£‡¶æ‡¶Æ‡¶Ø‡¶º ‡¶Ö‡¶∏‡ßÄ‡¶Æ ‡¶¶‡¶Ø‡¶º‡¶æ‡¶≤‡ßÅ ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßá‡•§ ‡¶¨‡¶≤‡ßÅ‡¶®, ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶∂‡ßç‡¶∞‡¶Ø‡¶º ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡¶õ‡¶ø ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑‡ßá‡¶∞ ‡¶∞‡¶¨‡ßá‡¶∞, (‡ßß) ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑‡ßá‡¶∞ ‡¶Ö‡¶ß‡¶ø‡¶™‡¶§‡¶ø‡¶∞, (‡ß®) ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑‡ßá‡¶∞ ‡¶á‡¶≤‡¶æ‡¶π‡ßá‡¶∞, (‡ß©) ‡¶ï‡ßÅ‡¶Æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£‡¶æ‡¶¶‡¶æ‡¶§‡¶æ‡¶∞ ‡¶Ö‡¶®‡¶ø‡¶∑‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶Ø‡ßá ‡¶™‡¶ø‡¶õ‡¶®‡ßá ‡¶∏‡¶∞‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º, (‡ß™) ‡¶Ø‡ßá ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑‡ßá‡¶∞ ‡¶Ö‡¶®‡ßç‡¶§‡¶∞‡ßá ‡¶ï‡ßÅ‡¶Æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£‡¶æ ‡¶¶‡ßá‡¶Ø‡¶º, (‡ß´) ‡¶ú‡¶ø‡¶® ‡¶ì ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑‡ßá‡¶∞ ‡¶™‡¶ï‡ßç‡¶∑ ‡¶•‡ßá‡¶ï‡ßá‡•§ (‡ß¨)", audio: "https://server.mp3quran.net/sds/114.mp3" }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const surahList = document.querySelector('.surah-list');
            const searchBar = document.querySelector('.search-bar');
            const themeToggle = document.getElementById('themeToggle');

            // --- Modal Elements ---
            const modals = document.querySelectorAll('.modal');
            const surahDetailsModal = document.getElementById('surahDetailsModal');
            const donationModal = document.getElementById('donationModal');
            const prayerModal = document.getElementById('prayerModal');
            const qiblaModal = document.getElementById('qiblaModal');
            const tasbihModal = document.getElementById('tasbihModal');
            
            // --- Feature Buttons ---
            const donateBtn = document.getElementById('donateBtn');
            const prayerTimeBtn = document.getElementById('prayerTimeBtn');
            const qiblaBtn = document.getElementById('qiblaBtn');
            const tasbihBtn = document.getElementById('tasbihBtn');

            // --- Surah Loading and Display ---
            function loadSurahs(surahArray = surahs) {
                surahList.innerHTML = '';
                surahArray.forEach(surah => {
                    const surahCard = document.createElement('div');
                    surahCard.className = 'surah-card';
                    surahCard.innerHTML = `<div class="surah-header"><h3>${surah.name}</h3><span>${surah.id}</span></div>
                                        <div class="surah-content"><p class="arabic-preview">${surah.arabic.substring(0, 70)}...</p>
                                        <button class="details-btn" data-id="${surah.id}">‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button></div>`;
                    surahList.appendChild(surahCard);
                });

                document.querySelectorAll('.details-btn').forEach(button => {
                    button.addEventListener('click', function() { showSurahDetails(parseInt(this.dataset.id)); });
                });
            }

            function showSurahDetails(id) {
                const surah = surahs.find(s => s.id === id);
                if (surah) {
                    const detailsContent = surahDetailsModal.querySelector('#detailsContent');
                    detailsContent.innerHTML = `<h2>${surah.name}</h2>
                                                <div class="details-box"><p class="arabic">${surah.arabic}</p></div>
                                                <div class="details-box"><p class="bangla">${surah.bangla}</p></div>
                                                <div class="details-box"><p class="translation">${surah.translation}</p></div>
                                                <audio controls class="audio-player"><source src="${surah.audio}" type="audio/mpeg"></audio>`;
                    surahDetailsModal.style.display = 'flex';
                }
            }

            // --- Generic Modal Handling ---
            modals.forEach(modal => {
                const closeBtn = modal.querySelector('.modal-close');
                if (closeBtn) {
                    closeBtn.addEventListener('click', () => {
                        modal.style.display = 'none';
                        // Stop any media playing in the modal
                        const audio = modal.querySelector('audio');
                        if (audio) audio.pause();
                        // Stop Qibla compass updates
                        if (modal.id === 'qiblaModal') stopQiblaCompass();
                    });
                }
            });
            window.addEventListener('click', (event) => {
                modals.forEach(modal => { if (event.target == modal) modal.style.display = 'none'; });
            });

            // --- Search and Theme ---
            searchBar.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const filteredSurahs = surahs.filter(surah => 
                    surah.name.toLowerCase().includes(searchTerm) || 
                    surah.bangla.toLowerCase().includes(searchTerm) ||
                    surah.translation.toLowerCase().includes(searchTerm));
                loadSurahs(filteredSurahs);
            });
            themeToggle.addEventListener('click', () => document.body.classList.toggle('dark-mode'));

            // --- Donation Feature ---
            donateBtn.addEventListener('click', () => {
                const upiId = 'ajibuddin58@axl';
                const upiName = 'Ajibuddin';
                const qrImg = document.getElementById('qrCodeImg');
                const qrApiUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=upi://pay?pa=${upiId}&pn=${upiName}`;
                qrImg.src = qrApiUrl;
                qrImg.alt = "UPI QR Code";
                donationModal.style.display = 'flex';
            });
            
            // --- Prayer Times Feature ---
            prayerTimeBtn.addEventListener('click', () => {
                prayerModal.style.display = 'flex';
                const contentDiv = document.getElementById('prayerTimesContent');
                contentDiv.innerHTML = '<p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶ñ‡ßã‡¶Å‡¶ú‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>';

                navigator.geolocation.getCurrentPosition(async position => {
                    const { latitude, longitude } = position.coords;
                    try {
                        const response = await fetch(`https://api.aladhan.com/v1/timings?latitude=${latitude}&longitude=${longitude}&method=2`);
                        if (!response.ok) throw new Error('API ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§');
                        const data = await response.json();
                        const timings = data.data.timings;
                        contentDiv.innerHTML = `
                            <p>${data.data.meta.timezone} (‡¶Ü‡¶ú)</p>
                            <ul id="prayerTimesList">
                                <li>‡¶´‡¶ú‡¶∞ <span>${timings.Fajr}</span></li>
                                <li>‡¶Ø‡ßã‡¶π‡¶∞ <span>${timings.Dhuhr}</span></li>
                                <li>‡¶Ü‡¶∏‡¶∞ <span>${timings.Asr}</span></li>
                                <li>‡¶Æ‡¶æ‡¶ó‡¶∞‡¶ø‡¶¨ <span>${timings.Maghrib}</span></li>
                                <li>‡¶á‡¶∂‡¶æ <span>${timings.Isha}</span></li>
                            </ul>`;
                    } catch (error) {
                        contentDiv.innerHTML = `<p>‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶Ü‡¶®‡¶æ ‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨ ‡¶π‡ßü‡¶®‡¶ø‡•§</p>`;
                    }
                }, error => {
                    contentDiv.innerHTML = `<p>‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶õ‡¶æ‡ßú‡¶æ ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨ ‡¶®‡ßü‡•§ ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶¶‡¶ø‡¶®‡•§</p>`;
                });
            });

            // --- Qibla Compass Feature ---
            let deviceOrientationListener = null;
            function stopQiblaCompass() {
                if (deviceOrientationListener) {
                    window.removeEventListener('deviceorientationabsolute', deviceOrientationListener);
                    deviceOrientationListener = null;
                }
            }
            qiblaBtn.addEventListener('click', () => {
                qiblaModal.style.display = 'flex';
                const needle = document.getElementById('qiblaNeedle');
                
                if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                    DeviceOrientationEvent.requestPermission().then(permissionState => {
                        if (permissionState === 'granted') {
                           startQiblaCompass(needle);
                        } else {
                            alert('‡¶ï‡¶ø‡¶¨‡¶≤‡¶æ ‡¶ï‡¶Æ‡ßç‡¶™‡¶æ‡¶∏‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßá‡¶®‡ßç‡¶∏‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡•§');
                        }
                    }).catch(console.error);
                } else {
                    startQiblaCompass(needle);
                }
            });

            function startQiblaCompass(needle) {
                 navigator.geolocation.getCurrentPosition(position => {
                    const { latitude, longitude } = position.coords;
                    const kaabaLat = 21.4225; // Kaaba latitude
                    const kaabaLon = 39.8262; // Kaaba longitude

                    const userLatRad = latitude * Math.PI / 180;
                    const kaabaLatRad = kaabaLat * Math.PI / 180;
                    const lonDiffRad = (kaabaLon - longitude) * Math.PI / 180;

                    const y = Math.sin(lonDiffRad) * Math.cos(kaabaLatRad);
                    const x = Math.cos(userLatRad) * Math.sin(kaabaLatRad) - Math.sin(userLatRad) * Math.cos(kaabaLatRad) * Math.cos(lonDiffRad);
                    const qiblaBearing = (Math.atan2(y, x) * 180 / Math.PI + 360) % 360;

                    deviceOrientationListener = (event) => {
                        const heading = event.webkitCompassHeading || event.alpha; // For iOS and others
                        const rotation = qiblaBearing - heading;
                        needle.style.transform = `translateX(-50%) rotate(${rotation}deg)`;
                    };
                    window.addEventListener('deviceorientationabsolute', deviceOrientationListener, true);

                }, () => {
                    alert('‡¶ï‡¶ø‡¶¨‡¶≤‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶£‡ßü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®‡•§');
                });
            }

            // --- Tasbih Counter Feature ---
            const tasbihDisplay = document.getElementById('tasbihDisplay');
            const tasbihCountBtn = document.getElementById('tasbihCountBtn');
            const tasbihResetBtn = document.getElementById('tasbihResetBtn');
            let count = 0;

            tasbihBtn.addEventListener('click', () => {
                tasbihModal.style.display = 'flex';
            });
            tasbihCountBtn.addEventListener('click', () => {
                count++;
                tasbihDisplay.textContent = count;
            });
            tasbihResetBtn.addEventListener('click', () => {
                count = 0;
                tasbihDisplay.textContent = count;
            });

            // Initial load
            loadSurahs();
        });
    </script>
</body>
</html>
